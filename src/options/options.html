<!DOCTYPE html>
<html>
<head>
  <title>BetterCupid Options</title>
  <link rel="stylesheet" type="text/css" href="app.css" />
  <link rel="stylesheet" type="text/css" href="options.css" />
</head>
<body class="options">
  {% macro toggle(setting='', css='', attrs='', off='off', on='ON') %}
    <label class="toggle-switch-container {{css}}" {{attrs}}>
      <input type="checkbox" data-setting="{{setting}}">
      <div class="toggle-switch">
        <div class="toggle-switch-off-text">{{off}}</div>
        <div class="toggle-switch-on-text">{{on}}</div>
      </div>
    </label>
  {% endmacro %}

  <div class="container" style="display: none">
    <header>
      <h1 class="title">
        <img src="title.png" alt="better cupid">
      </h1>
    </header>
    <!--
    <button type="button" class="btn reset-btn" data-drawer-open="reset-confirmation">
      Reset Settings
    </button>
    -->
    <nav class="navbar navbar--tabs">
      <ul class="nav">
        <li class="nav__item">
          <button type="button" class="nav__action"
              data-drawer-open="modules">
            Modules
          </button>
        </li>
      </ul>
      <ul class="nav nav--right">
        <li class="nav__item">
          <button type="button" class="nav__action"
              data-drawer-open="changelog">
            Changelog
          </button>
        </li>
        <li class="nav__item">
          <button type="button" class="nav__action"
              data-drawer-open="about">
            About
          </button>
        </li>
      </ul>
    </nav>
    <div class="panel">
      <section class="drawer row" data-drawer="modules"
          data-drawer-key="page-section">
        <div class="col-4 col-push-8">
          <nav class="navbar navbar--stacked">
            <div class="navbar__title">
              Modules
            </div>
            <ul class="nav">
              {% for module in manifest.modules %}
                <li class="nav__item">
                  <button type="button" class="nav__action"
                      data-drawer-open="module-{{module.id}}">
                    {{module.name}}
                  </button>
                  {% if not module.required %}
                    {{ toggle(setting="enabled", attrs="data-toggle='"+module.id+"'") }}
                  {% endif %}
                </li>
              {% endfor %}
            </ul>
          </nav>
        </div>
        <div class="col-8 col-pull-4">
          {% for module in manifest.modules %}
            <div class="drawer" data-drawer="module-{{module.id}}"
                data-drawer-key="module-settings" data-module="{{module.id}}">
              <h2>{{module.name}}</h2>
              <p class="text-subtle">{{module.description}}</p>
              <div class="row">
                {% if module.needs.length %}
                  <div class="col-6">
                    <div>Requires the following:</div>
                    <ul>
                      {% for mod in module.needs %}
                        <li>{{mod.name}}</li>
                      {% endfor %}
                    </ul>
                  </div>
                {% endif %}
                {% if module.wants.length %}
                  <div class="col-6">
                    <div>Pairs well with the following:</div>
                    <ul>
                      {% for mod in module.wants %}
                        <li>{{mod.name}}</li>
                      {% endfor %}
                    </ul>
                  </div>
                {% endif %}
              </div>
              {% if module.tabs.length > 1 %}
                <nav class="navbar navbar--tabs">
                  <ul class="nav">
                    {% for tab in module.tabs %}
                      <li class="nav__item">
                        <button type="button" class="nav__action"
                            data-drawer-open="{{module.id}}-{{tab.id}}">
                          {{tab.name}}
                        </button>
                      </li>
                    {% endfor %}
                  </ul>
                </nav>
                <div>
                  {% for tab in module.tabs %}
                    <div class="drawer" data-drawer="{{module.id}}-{{tab.id}}"
                        data-drawer-key="{{module.id}}-tab">
                      {% include "modules/" + module.id + "/" + tab.filename %}
                    </div>
                  {% endfor %}
                </div>
              {% else %}
                {{ module.tabs[0].content }}
              {% endif %}
            </div>
          {% endfor %}
        </div>
      </section>
      <section class="drawer row" data-drawer="changelog"
          data-drawer-key="page-section">
        <div class="col-4 col-push-8">
          <nav class="navbar navbar--stacked">
            <div class="navbar__title">Changelog</div>
            <ul class="nav">
              {% set last_version = 0 %}
              {% for entry in manifest.changelog %}
                {% set version = entry.version | version %}
                {% if version != last_version %}
                  {% set last_version = version %}
                  <li class="nav__item">
                    <button type="button" class="nav__action"
                         data-drawer-open="changelog-{{version}}">
                      {{version}}
                    </button>
                  </li>
                {% endif %}
              {% endfor %}
            </ul>
          </nav>
        </div>
        <div class="col-8 col-pull-4">
          {% set last_version = 0 %}
          {% for entry in manifest.changelog %}
            {% set version = entry.version | version %}
            {% if version != last_version %}
              {% set last_version = version %}
                <div class="drawer" data-drawer="changelog-{{version}}"
                    data-drawer-key="changelog">
                  {% for entry in manifest.changelog %}
                    {% set version = entry.version | version %}
                    {% if version == last_version %}
                      <div class="changelog">
                        <h2>Version {{entry.version}}</h2>
                        <div class="changelog__date">{{entry.date}}</div>
                        {% for section in entry.sections %}
                          <h3>{{section.heading}}</h3>
                          {% for paragraph in section.paragraphs %}
                            <p>{{paragraph}}</p>
                          {% endfor %}
                          {% if section.notes %}
                            <ul>
                              {% for note in section.notes %}
                                <li>{{note}}</li>
                              {% endfor %}
                            </ul>
                          {% endif %}
                        {% endfor %}
                      </div>
                    {% endif %}
                  {% endfor %}
                </div>
            {% endif %}
          {% endfor %}
        </div>
      </section>
      <section class="drawer" data-drawer="about"
          data-drawer-key="page-section">
        <h2>About</h2>
        <p>
          I've been a fan of OkCupid since its very early inception as TheSpark. Back then, it was a bunch of random stuff along with fun quizzes to help you figure out anything from your personality type to which Simpsons character you were most like. SparkNotes and SparkMatch grew from the success, and SparkMatch went on to become OkCupid. It took all the fun tests along with their new match-making stuff and created a revolutionary service... compatability by math. It's fun, functional, and free!
        </p>
        <p>
          I've been creating small greasemonkey scripts for years. Never anything major, small enhancements for my own use for some of my favorite sites. Recently, I turned my attention to OkCupid. I started finding little things that I wanted to enhance here and there, and as I poked around in the markup, I found that it was organized extremely well. It's a lot of fun to play with the DOM and manipulate things. It's easy to find the data that you need.
        </p>
        <p>
          I had a half dozen or so different scripts sitting around so I thought it might be fun to create a real extension and dig deeper into the Chrome Extension API. And from there, it was only natural to see what publishing it would be all about, but that'd require a name and an icon and more concrete information. Thus: BetterCupid was born... OkCupid is great and all, but this made it better. :)
        </p>
      </section>
    </div>
  </div>

  <script src="app.js"></script>
  <script src="options.js"></script>
</body>
</html>
