<script>
(function(module) {

chrome.browserAction.onClicked.addListener(function(tab) {
	window.open(module.db.get("openUrl"));
});

function settingsUpdated() {
	chrome.browserAction.setPopup({ popup: module.db.get("clickAction") === "popup" ? "/popup/popup.html" : "" });
}

core.addEventListener("dbchange", function(e) {
	settingsUpdated();
});
settingsUpdated();

})(module);
</script>