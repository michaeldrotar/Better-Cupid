<button id="test-button" style="position: absolute; top: 0px; left: 0px;">test</button>

<script>
(function(module) {

$("#test-button").click(function() {
	module.db.clear("visible");
});

(function() {
//try {
var storage = localStorage;
var db = new DB({ storage: storage, defaults: { a: 0, b: "1", c: {} } });
db.set("a", 5);
console.log(db.get("a"), $.copy(storage));
db.clear("a");
console.log(db.get("a"), $.copy(storage));
db.set("a", 10);
db.set("d", 20);
console.log(db.get("a"), db.get("d"), $.copy(storage));
db.reset();
console.log(db.get("a"), db.get("d"), $.copy(storage));

var db2 = db.expand({key:"recently-visited", defaults: { d:0, e:1 }});

db2.set("a", 5);
console.log(db.get("a"), $.copy(storage));
console.log(db2.get("a"), $.copy(storage));
db2.clear("a");
console.log(db.get("a"), $.copy(storage));
console.log(db2.get("a"), $.copy(storage));
db2.set("a", 10);
db2.set("d", 20);
console.log(db2.get("a"), db2.get("d"), $.copy(storage));
db2.clear();
console.log(db2.get("a"), db2.get("d"), $.copy(storage));

db.set("a", 5);
console.log(db.get("a"), $.copy(storage));
db.clear("a");
console.log(db.get("a"), $.copy(storage));
db.set("a", 10);
db.set("d", 20);
console.log(db.get("a"), db.get("d"), $.copy(storage));
db.clear();
console.log(db.get("a"), db.get("d"), $.copy(storage));

//} catch ( error ) {
//console.error(error.stack);
//}
})();

})(module);
</script>